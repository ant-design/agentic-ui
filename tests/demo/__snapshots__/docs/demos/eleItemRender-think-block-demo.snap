<DocumentFragment>
  <div
    class="ant-app"
  >
    <div>
      test
    </div>
    <div
      style="padding: 20px; max-width: 800px; margin: 0px auto;"
    >
      <h1
        style="color: rgb(45, 55, 72); margin-bottom: 20px;"
      >
        eleItemRender Think 块自定义渲染 Demo
      </h1>
      <div
        style="margin-bottom: 20px;"
      >
        <p
          style="color: rgb(74, 85, 104); line-height: 1.6;"
        >
          这个 demo 展示了如何使用 
          <code>
            eleItemRender
          </code>
           属性来自定义
          <code>
            ```think
          </code>
           代码块的渲染效果。
        </p>
      </div>
      <div
        style="border: 1px solid rgb(226, 232, 240); border-radius: 8px; overflow: hidden;"
      >
        <div
          class="markdown-editor ant-md-editor ant-md-editor-edit"
          style="width: 100%; height: auto; display: flex; flex-direction: column; max-height: 100%; min-height: 600px;"
        >
          <div
            style="padding: 12px 20px; overflow: auto; display: flex; height: 100%; position: relative; gap: 24px; outline: none;"
            tabindex="-1"
          >
            <div
              aria-multiline="true"
              autocapitalize="false"
              autocorrect="false"
              class="ant-md-editor-content-focus ant-md-editor-content ant-md-editor-content-edit"
              contenteditable="true"
              data-slate-editor="true"
              data-slate-node="value"
              role="textbox"
              spellcheck="false"
              style="position: relative; white-space: pre-wrap; word-wrap: break-word; font-size: 14px;"
              zindex="-1"
            >
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="eleitemrender-think-块自定义渲染-demo"
                style="font-size: 1.5em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      eleItemRender Think 块自定义渲染 Demo
                    </span>
                  </span>
                </span>
              </div>
              <div
                class="ant-md-editor-drag-el"
                data-be="paragraph"
                data-slate-node="element"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      这是一个演示如何使用 
                    </span>
                  </span>
                </span>
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <code
                      class="ant-md-editor-content-inline-code"
                    >
                      <span
                        data-slate-string="true"
                      >
                        eleItemRender
                      </span>
                    </code>
                  </span>
                </span>
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                       来自定义 think 代码块渲染的示例。
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="默认-think-块"
                style="font-size: 1.375em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      默认 Think 块
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
              >
                <div
                  style="background-color: rgb(248, 249, 250); border: 2px solid rgb(233, 236, 239); border-radius: 8px; padding: 16px; margin: 12px 0px; position: relative; font-family: system-ui, -apple-system, sans-serif;"
                >
                  <div
                    style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgb(222, 226, 230);"
                  >
                    <div
                      style="width: 12px; height: 12px; border-radius: 50%; background-color: rgb(0, 123, 255); animation: pulse 2s infinite;"
                    />
                    <span
                      style="font-weight: 600; color: rgb(73, 80, 87); font-size: 14px;"
                    >
                      🤔 AI 思考过程
                    </span>
                  </div>
                  <div
                    style="color: rgb(73, 80, 87); line-height: 1.6; white-space: pre-wrap; font-size: 14px;"
                  >
                    这是一个默认的 think 代码块
它会显示为灰色的思考内容
通常用于显示 AI 的思考过程
                  </div>
                  <div
                    style="position: absolute; bottom: 0px; left: 0px; right: 0px; height: 4px; background: linear-gradient(90deg, #007bff, #28a745, #ffc107, #dc3545); border-radius: 0 0 6px 6px;"
                  />
                </div>
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      这是一个默认的 think 代码块
它会显示为灰色的思考内容
通常用于显示 AI 的思考过程
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="自定义渲染的-think-块"
                style="font-size: 1.375em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      自定义渲染的 Think 块
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
              >
                <div
                  style="background-color: rgb(255, 255, 255); border: 1px solid rgb(225, 229, 233); border-radius: 12px; padding: 16px; margin: 16px 0px; position: relative; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);"
                >
                  <div
                    style="position: absolute; top: 0px; left: 0px; right: 0px; height: 4px; background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);"
                  />
                  <div
                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;"
                  >
                    <div
                      style="display: flex; align-items: center; gap: 8px;"
                    >
                      <div
                        style="width: 8px; height: 8px; border-radius: 50%; background-color: rgb(102, 126, 234); animation: bounce 1.5s infinite;"
                      />
                      <span
                        style="font-weight: 600; color: rgb(45, 55, 72); font-size: 14px;"
                      >
                        💭 深度思考
                      </span>
                    </div>
                    <button
                      style="background: none; color: rgb(102, 126, 234); cursor: pointer; font-size: 12px; font-weight: 500; padding: 4px 8px; border-radius: 4px; transition: background-color 0.2s;"
                      type="button"
                    >
                      展开
                    </button>
                  </div>
                  <div
                    style="color: rgb(74, 85, 104); line-height: 1.7; white-space: pre-wrap; font-size: 14px; transition: all 0.3s ease; max-height: 120px; overflow: hidden;"
                  >
                    这是一个会被自定义渲染的 think 代码块
通过 eleItemRender 函数，我们可以：
1. 拦截 think 类型的代码块
...
                  </div>
                  <div
                    style="position: absolute; bottom: 40px; left: 16px; right: 16px; height: 20px; background: linear-gradient(transparent, #fff); pointer-events: none;"
                  />
                </div>
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      这是一个会被自定义渲染的 think 代码块
通过 eleItemRender 函数，我们可以：
1. 拦截 think 类型的代码块
2. 应用自定义的样式和布局
3. 添加交互功能（如展开/收起）
4. 增强视觉效果

这个块会被渲染为带有渐变背景和动画效果的组件
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="长内容-think-块"
                style="font-size: 1.375em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      长内容 Think 块
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
              >
                <div
                  style="background-color: rgb(255, 255, 255); border: 1px solid rgb(225, 229, 233); border-radius: 12px; padding: 16px; margin: 16px 0px; position: relative; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);"
                >
                  <div
                    style="position: absolute; top: 0px; left: 0px; right: 0px; height: 4px; background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);"
                  />
                  <div
                    style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;"
                  >
                    <div
                      style="display: flex; align-items: center; gap: 8px;"
                    >
                      <div
                        style="width: 8px; height: 8px; border-radius: 50%; background-color: rgb(102, 126, 234); animation: bounce 1.5s infinite;"
                      />
                      <span
                        style="font-weight: 600; color: rgb(45, 55, 72); font-size: 14px;"
                      >
                        💭 深度思考
                      </span>
                    </div>
                    <button
                      style="background: none; color: rgb(102, 126, 234); cursor: pointer; font-size: 12px; font-weight: 500; padding: 4px 8px; border-radius: 4px; transition: background-color 0.2s;"
                      type="button"
                    >
                      展开
                    </button>
                  </div>
                  <div
                    style="color: rgb(74, 85, 104); line-height: 1.7; white-space: pre-wrap; font-size: 14px; transition: all 0.3s ease; max-height: 120px; overflow: hidden;"
                  >
                    这是一个较长的 think 代码块，用于演示展开/收起功能。

第一行内容
...
                  </div>
                  <div
                    style="position: absolute; bottom: 40px; left: 16px; right: 16px; height: 20px; background: linear-gradient(transparent, #fff); pointer-events: none;"
                  />
                </div>
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      这是一个较长的 think 代码块，用于演示展开/收起功能。

第一行内容
第二行内容
第三行内容
第四行内容
第五行内容
第六行内容
第七行内容
第八行内容
第九行内容
第十行内容

当内容超过 3 行时，会自动显示展开/收起按钮。
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="普通代码块（不受影响）"
                style="font-size: 1.375em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      普通代码块（不受影响）
                    </span>
                  </span>
                </span>
              </div>
              <div
                data-slate-node="element"
              >
                <div
                  class="ace-el drag-el"
                  contenteditable="false"
                  data-be="code"
                  data-lang="javascript"
                  data-testid="code-container"
                  tabindex="-1"
                >
                  <div
                    contenteditable="false"
                    style="background-color: transparent; user-select: none;"
                  >
                    <div
                      class="ace-container drag-el "
                      data-testid="code-editor-container"
                      style="box-sizing: border-box; background-color: rgb(252, 252, 252); max-height: 400px; overflow: auto; position: relative; height: auto; opacity: 1; border: 1px solid rgb(231, 233, 232); transition: border-color 0.2s ease-in-out;"
                    >
                      <div
                        contenteditable="false"
                        style="height: 0px; width: 100%; position: sticky; left: 0px; top: 0px; display: flex; align-items: center; justify-content: flex-end; padding-right: 0.375em; z-index: 50; box-sizing: border-box; transition: all 0.2s ease-in-out;"
                      />
                      <div
                        data-testid="ace-editor-container"
                        style="height: 200px; line-height: 22px;"
                      />
                      <div
                        data-testid="code-content-copy"
                        style="height: 0.5px; overflow: hidden; opacity: 0; pointer-events: none;"
                      >
                        // 这是一个普通的 JavaScript 代码块 // 不会被 eleItemRender 修改 console.log('Hello World');
                        <span
                          data-slate-node="text"
                        >
                          <span
                            data-be="text"
                            data-slate-leaf="true"
                            draggable="false"
                          >
                            <span
                              data-slate-string="true"
                            >
                              // 这是一个普通的 JavaScript 代码块
// 不会被 eleItemRender 修改
console.log('Hello World');
                            </span>
                          </span>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="使用说明"
                style="font-size: 1.375em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      使用说明
                    </span>
                  </span>
                </span>
              </div>
              <div
                class="ant-md-editor-list-container relative"
                data-be="list"
                data-slate-node="element"
              >
                <ol
                  class="ant-md-editor-list ol"
                  start="1"
                >
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                          style="font-weight: bold;"
                        >
                          <span
                            data-testid="markdown-bold"
                          >
                            <span
                              data-slate-string="true"
                            >
                              eleItemRender 函数
                            </span>
                          </span>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            ：在 MarkdownEditor 组件中传入自定义的 eleItemRender 函数
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                          style="font-weight: bold;"
                        >
                          <span
                            data-testid="markdown-bold"
                          >
                            <span
                              data-slate-string="true"
                            >
                              类型检查
                            </span>
                          </span>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            ：检查元素类型是否为 'code' 且 language 为 'think'
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                          style="font-weight: bold;"
                        >
                          <span
                            data-testid="markdown-bold"
                          >
                            <span
                              data-slate-string="true"
                            >
                              条件渲染
                            </span>
                          </span>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            ：根据内容长度选择不同的渲染组件
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                          style="font-weight: bold;"
                        >
                          <span
                            data-testid="markdown-bold"
                          >
                            <span
                              data-slate-string="true"
                            >
                              保持功能
                            </span>
                          </span>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            ：确保自定义渲染不会影响编辑器的其他功能
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                </ol>
              </div>
              <div
                data-slate-node="element"
                data-testid="markdown-heading"
                id="技术要点"
                style="font-size: 1.375em; font-weight: 600; line-height: 1.25; margin-top: 1em; margin-bottom: 1em;"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-string="true"
                    >
                      技术要点
                    </span>
                  </span>
                </span>
              </div>
              <div
                class="ant-md-editor-list-container relative"
                data-be="list"
                data-slate-node="element"
              >
                <ul
                  class="ant-md-editor-list ul"
                >
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            使用 
                          </span>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <code
                            class="ant-md-editor-content-inline-code"
                          >
                            <span
                              data-slate-string="true"
                            >
                              eleProps.attributes
                            </span>
                          </code>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                             保持 Slate 编辑器的属性
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            通过 
                          </span>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <code
                            class="ant-md-editor-content-inline-code"
                          >
                            <span
                              data-slate-string="true"
                            >
                              eleProps.children
                            </span>
                          </code>
                        </span>
                      </span>
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                             保持子元素渲染
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            自定义组件可以包含交互功能和动画效果
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                  <li
                    class="ant-md-editor-list-item"
                    data-be="list-item"
                    data-slate-node="element"
                  >
                    <div
                      class="ant-md-editor-drag-el"
                      data-be="paragraph"
                      data-slate-node="element"
                    >
                      <span
                        data-slate-node="text"
                      >
                        <span
                          data-be="text"
                          data-slate-leaf="true"
                          draggable="false"
                        >
                          <span
                            data-slate-string="true"
                          >
                            支持响应式设计和主题定制
                          </span>
                        </span>
                      </span>
                    </div>
                  </li>
                </ul>
              </div>
              <div
                class="ant-md-editor-drag-el"
                data-be="paragraph"
                data-slate-node="element"
              >
                <span
                  data-slate-node="text"
                >
                  <span
                    data-be="text"
                    data-slate-leaf="true"
                    draggable="false"
                  >
                    <span
                      data-slate-length="0"
                      data-slate-zero-width="n"
                    >
                      ﻿
                      <br />
                    </span>
                  </span>
                </span>
              </div>
            </div>
          </div>
          <div
            class="ant-md-editor-focus"
            style="height: 64px;"
          />
        </div>
      </div>
      <style>
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        
        @keyframes bounce {
          0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
          40%, 43% { transform: translate3d(0,-8px,0); }
          70% { transform: translate3d(0,-4px,0); }
          90% { transform: translate3d(0,-2px,0); }
        }
      
      </style>
    </div>
  </div>
</DocumentFragment>